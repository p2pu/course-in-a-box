<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weekly Journal Submission</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.min.css">
</head>
<body onload="showJournalForm()">

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.all.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  document.getElementById("openFormButton").addEventListener("click", function () {
    showJournalForm();
  });
});

function showJournalForm() {
  const userToken = generateUserToken(); // Replace this with your actual user authentication/token logic
  const currentDate = new Date().toISOString().split("T")[0];

  Swal.fire({
    title: "Weekly Journal",
    allowOutsideClick: false,
    html:
      `<p><strong>Starting Length:</strong></p>
      <input type="text" id="startingLength" class="swal2-input" placeholder="Enter starting length" required>
      <p><strong>Starting Girth:</strong></p>
      <input type="text" id="startingGirth" class="swal2-input" placeholder="Enter starting girth" required>
      <p><strong>End Goals:</strong></p>
      <input type="text" id="endGoals" class="swal2-input" placeholder="Enter end goals" required>`,
    focusConfirm: false,
    preConfirm: () => {
      const startingLength = document.getElementById("startingLength").value;
      const startingGirth = document.getElementById("startingGirth").value;
      const endGoals = document.getElementById("endGoals").value;

      // Store data in your database (backend) using AJAX or fetch API
      // Replace the following code with your actual backend integration
      const journalData = {
        userToken: userToken,
        date: currentDate,
        questions: [
          {
            question: "Starting Length",
            answer: startingLength,
          },
          {
            question: "Starting Girth",
            answer: startingGirth,
          },
          {
            question: "End Goals",
            answer: endGoals,
          },
        ],
      };

      // Simulate AJAX/fetch request success with a log and a SweetAlert notification
      // Replace this with your actual AJAX/fetch call to your backend
      // and handle success/error responses accordingly
      setTimeout(function () {
        console.log("User Token:", userToken);
        console.log("Date:", currentDate);
        console.log("Journal Data:", journalData);
        Swal.fire({
          icon: "success",
          title: "Journal Submitted",
	  allowOutsideClick: false,
          text: "Your journal entry has been submitted successfully!",
        });
      }, 1000); // Simulating a short delay for the AJAX/fetch request
    },
  });
}

function generateUserToken() {
  // Replace this with your actual user authentication/token logic
  // For this example, let's generate a random token of length 6
  const characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
  let token = "";
  for (let i = 0; i < 6; i++) {
    token += characters.charAt(Math.floor(Math.random() * characters.length));
  }
  return token;
}


</script>
</body>
</html>
